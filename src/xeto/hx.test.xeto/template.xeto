//
// Copyright (c) 2025, SkyFoundry LLC
// Licensed under the Academic Free License version 3.0
//
// History:
//   28 Sep 2025  Brian Frank  Creation
//

//////////////////////////////////////////////////////////////////////////
// Bind
//////////////////////////////////////////////////////////////////////////

testTemplateBindA: Template {
  s: Str

  returns: TestFolder {
    dis: "Test"
    foo
    x: Bind <var:"s">
    y: Number 123
  }
}

testTemplateBindB: Template {
  data: Dict

  returns: Dict {
    a:  Bind <var:"data.a">
    b:  Bind <var:"data.b">
    c:  Bind <var:"data.c.nest">
    d:  Bind <var:"data.d">
    e:  Bind <var:"data.e">
    en: Bind <var:"data.e.nest">
  }
}

//////////////////////////////////////////////////////////////////////////
// If
//////////////////////////////////////////////////////////////////////////

testTemplateIfA: Template {
  cond: Bool

  returns: Dict {
    If <var:"cond"> {
      dis: "cond is true"
    }
  }
}

testTemplateIfB: Template {
  cond: Bool

  returns: Dict {
    If <var:"cond"> {
      dis: "cond is true"
      yea
    }
    Else {
      dis: "cond is false"
      nay
    }
  }
}

testTemplateIfC: Template {
  cond1: Bool
  cond2: Bool

  returns: Dict {
    If <var:"cond1"> {
      dis1: "true"
    }
    Else {
      dis1: "false"
    }
    If <var:"cond2"> {
      dis2: "true"
    }
  }
}

//////////////////////////////////////////////////////////////////////////
// Switch
//////////////////////////////////////////////////////////////////////////

testTemplateSwitchA: Template {
  cond: Str

  returns: Dict {
    Switch <var:"cond"> {
      Case <match:"a"> {
        dis:"case a"
        alpha
      }
      Case <match:"b"> {
        dis:"case b"
        beta
      }
      Default {
        dis:"case default"
      }
    }
  }
}

//////////////////////////////////////////////////////////////////////////
// Foreach
//////////////////////////////////////////////////////////////////////////

testTemplateForeachA: Template {
  list: List<of:Str>

  returns: List {
    Foreach <var:"list"> {
      Bind <var:"it">
    }
  }
}

testTemplateForeachB: Template {
  list: List<of:Str>

  returns: Dict {
    Foreach <var:"list"> {
      Dict { dis: Bind <var:"it"> }
    }
  }
}

testTemplateForeachC: Template {
  data: List<of:Str>

  returns: Dict {
    nestDict: Dict { Foreach <var:"data"> { Bind <var:"it"> } }
    nestList: List { Foreach <var:"data"> { Bind <var:"it"> } }
    nestGrid: Grid { Foreach <var:"data"> { Dict {dis:Bind <var:"it"> } } }
    Foreach <var:"data"> { Bind <var:"it"> }  // spread operator
  }
}

